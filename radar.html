<!DOCTYPE html>
<html>

<head>
    <title>Radar the topics</title>
    <!-- Add any necessary CSS stylesheets and JavaScript files here -->
    <link rel="stylesheet" type="text/css" href="radar.css">
</head>

<body>
    <h1>How has media reporting on personal finance changed over time?</h1>
    <h2>Step 2: Which topics are most common in each country?</h2>
    <!-- Styles -->

    <!-- Styles -->
    <style>
        /* CSS styling for the title */
        /* CSS styling for the main heading */
        h1 {
            background-image: linear-gradient(to right, #5E5AA8, #FF5F6D);
            /* Gradient background */
            -webkit-background-clip: text;
            /* Apply the background to the text */
            -webkit-text-fill-color: transparent;
            /* Make the text transparent */
            font-family: 'Helvetica Neue', sans-serif;
            /* Font family */
            font-size: 4em;
            /* Font size */
            text-align: center;
            /* Center align the text */
        }

        h2 {
            background-image: linear-gradient(to right, #5E5AA8, #FF5F6D);
            /* Gradient background */
            -webkit-background-clip: text;
            /* Apply the background to the text */
            -webkit-text-fill-color: transparent;
            /* Make the text transparent */
            font-family: 'Helvetica Neue', sans-serif;
            /* Font family */
            font-size: 2.5em;
            /* Font size */
            text-align: center;
            /* Center align the text */
        }
        h3 {
            background-image: linear-gradient(to right, #5E5AA8, #FF5F6D);
            /* Gradient background */
            -webkit-background-clip: text;
            /* Apply the background to the text */
            -webkit-text-fill-color: transparent;
            /* Make the text transparent */
            font-family: 'Helvetica Neue', sans-serif;
            /* Font family */
            font-size: 1em;
            /* Font size */
            text-align: center;
            /* Center align the text */
            margin-top: 1rem;
        }

        .button-container {
            text-align: center;
        }

        #chartdiv {
            width: 200%;
            height: 100%;
        }

        body {
            /* overflow: hidden; */
        }
        .link-container {
            display: flex;
            justify-content: center;
            margin-top: 0px;
            margin-left: -90px;
        }

        .link {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin: 1rem;

        }
    </style>
    <!-- Styles -->
    <style>
        #chartdiv {
            width: 100%;
            height: 600px;
            margin-top: 0px;
        }
    </style>

    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

    <!-- Chart code -->
    <script>
        am4core.ready(function () {

            // Themes begin
            am4core.useTheme(am4themes_animated);
            // Themes end

            /**
             * This is a copy of a chart created by Antti Lipponen: https://twitter.com/anttilip?lang=en Thanks a lot!
             */

            // disclaimer: this data is not accuarate, don't use it for any puroposes
            // first temperature is average for 1973-1980 period

            var temperatures = { "USA": [["Groceries ", 2.12, 1.71, 2.68, 3.41, 17.47, 19.11, 16.52, 16.42, 11.42, 15.0, 8.88, 15.45, 4.05, 3.86, 3.12, 2.39, 3.27, 3.61, 4.88, 2.99, 3.1, 2.58, 2.01, 1.11, 1.95, 1.32, 1.71, 1.34, 1.53, 1.56, 1.51, 0.77, 0.75], ["Health Care ", 10.88, 9.71, 18.12, 17.85, 18.39, 18.05, 18.48, 16.24, 14.53, 15.69, 14.03, 10.76, 9.48, 11.6, 10.19, 7.23, 7.97, 7.89, 8.38, 29.71, 32.35, 26.42, 14.61, 27.27, 21.82, 18.42, 10.2, 8.64, 7.82, 9.07, 11.75, 8.13, 5.87], ["Mortgaes ", 20.16, 19.14, 21.92, 19.42, 21.43, 17.58, 16.14, 13.21, 14.87, 16.88, 14.82, 15.12, 17.94, 20.58, 21.68, 18.78, 20.45, 31.15, 33.6, 16.39, 12.08, 11.84, 14.27, 10.2, 8.02, 7.43, 8.32, 8.98, 8.19, 8.3, 11.86, 11.62, 9.84], ["Property ", 15.38, 16.29, 14.09, 12.07, 11.37, 12.69, 15.38, 14.09, 13.16, 12.68, 14.95, 13.07, 11.12, 11.09, 10.39, 13.75, 16.06, 13.71, 14.76, 8.7, 7.44, 6.93, 14.33, 12.53, 14.23, 16.82, 20.07, 13.83, 17.48, 15.24, 18.15, 16.91, 14.12], ["Retirement ", 1.33, 5.71, 1.57, 1.05, 1.34, 1.28, 1.0, 1.31, 1.0, 1.06, 0.72, 1.72, 2.17, 2.25, 3.27, 2.3, 1.52, 1.05, 1.47, 1.67, 1.4, 1.14, 6.42, 5.43, 4.42, 3.24, 2.59, 2.63, 2.29, 2.21, 1.56, 1.8, 1.5], ["Scams ", 2.92, 2.29, 4.03, 3.41, 4.45, 3.9, 5.48, 4.33, 4.99, 5.47, 4.05, 2.71, 6.74, 10.41, 17.01, 15.53, 6.72, 6.44, 5.31, 5.33, 3.9, 3.47, 3.69, 1.96, 2.61, 1.91, 3.51, 8.22, 6.66, 6.05, 5.21, 5.2, 4.44], ["Social security ", 22.28, 16.0, 13.65, 17.85, 11.4, 10.9, 10.83, 15.73, 17.35, 12.61, 16.25, 14.98, 20.56, 13.96, 14.76, 18.89, 12.76, 8.9, 8.87, 12.22, 16.41, 21.61, 26.33, 22.45, 21.78, 19.85, 19.26, 13.62, 15.36, 15.15, 13.52, 13.13, 11.14], ["Student loans ", 7.43, 10.29, 5.37, 5.25, 4.73, 5.91, 6.24, 6.55, 8.2, 8.1, 10.25, 12.21, 9.19, 8.84, 6.62, 7.38, 8.24, 7.96, 7.98, 9.24, 8.22, 12.72, 9.87, 8.22, 10.91, 15.49, 24.94, 32.38, 32.6, 35.4, 27.58, 35.39, 47.25], ["Tax ", 17.51, 18.86, 18.57, 19.69, 9.42, 10.58, 9.93, 12.12, 14.47, 12.51, 16.06, 13.99, 18.76, 17.41, 12.95, 13.75, 23.0, 19.29, 14.76, 13.74, 15.09, 13.31, 8.47, 10.84, 14.25, 15.52, 9.4, 10.35, 8.07, 7.01, 8.87, 7.05, 5.1]], "UK": [["Health Care  ", 1.08, 3.12, 3.47, 3.38, 0.66, 0.6, 0.67, 1.52, 1.69, 1.94, 1.39, 1.23, 1.26, 1.16, 1.15, 3.86, 6.32, 9.64, 5.66, 6.2, 4.33, 4.49, 2.98, 2.73, 2.41, 2.6, 2.59, 2.89, 2.45], ["Mortgaes  ", 51.61, 76.74, 62.69, 64.29, 42.86, 31.7, 29.21, 34.3, 46.77, 61.69, 59.36, 44.67, 37.87, 46.11, 49.62, 45.74, 50.35, 55.82, 55.41, 46.93, 26.68, 18.88, 17.64, 20.41, 19.47, 15.86, 17.64, 12.7, 10.68, 8.6, 9.91, 9.24, 10.99], ["Property  ", 10.75, 4.65, 4.48, 4.29, 6.7, 4.95, 4.35, 1.82, 2.56, 3.18, 7.12, 8.59, 7.51, 7.87, 6.39, 6.9, 7.54, 8.43, 7.95, 9.52, 7.28, 8.77, 17.19, 12.58, 13.49, 17.86, 15.81, 14.08, 13.28, 11.63, 15.01, 17.91], ["Retirement  ", 11.83, 6.98, 14.93, 20.0, 47.62, 37.95, 44.55, 39.13, 34.83, 18.7, 19.06, 22.02, 24.64, 19.62, 21.4, 27.88, 20.3, 15.56, 14.2, 19.34, 23.52, 32.83, 47.66, 36.85, 42.85, 41.31, 30.73, 26.04, 23.27, 21.97, 23.97, 24.83, 24.27], ["Scams  ", 1.08, 6.98, 1.49, 3.12, 4.95, 2.42, 2.49, 1.96, 3.01, 8.02, 7.21, 7.65, 6.22, 6.82, 6.29, 6.42, 6.64, 7.16, 13.06, 8.57, 4.69, 5.32, 5.88, 6.09, 9.65, 9.86, 10.5, 10.05, 9.25, 9.87, 8.18], ["Tax  ", 23.66, 4.65, 13.43, 11.43, 9.52, 9.38, 8.42, 13.53, 10.61, 11.61, 12.04, 11.32, 13.85, 11.74, 9.06, 7.92, 9.89, 8.81, 8.13, 7.93, 11.1, 12.66, 6.46, 6.07, 7.12, 8.78, 6.63, 6.78, 6.43, 5.57, 5.54, 7.41, 7.43], ["Student loans  ", 2.99, 3.57, 2.97, 0.48, 0.83, 1.51, 1.34, 2.3, 2.7, 2.29, 1.72, 1.64, 1.88, 1.47, 1.36, 2.07, 3.06, 4.31, 1.97, 2.11, 2.49, 3.47, 4.41, 6.78, 5.28, 4.55, 3.38, 4.59, 5.64], ["Groceries  ", 1.34, 0.97, 0.33, 0.75, 0.33, 1.44, 1.8, 1.57, 1.64, 1.5, 2.27, 2.08, 3.59, 2.84, 3.52, 2.3, 2.7, 2.37, 2.45, 3.2, 7.2, 16.47, 24.16, 30.42, 27.29, 19.0, 14.52], ["Social security  ", 3.12, 1.49, 1.45, 1.66, 0.6, 1.0, 1.6, 1.65, 1.57, 1.07, 0.88, 0.87, 1.14, 1.09, 1.92, 3.23, 3.53, 4.44, 3.48, 2.84, 3.3, 2.92, 2.82, 3.19, 2.97, 6.45, 7.16, 8.61]], "CANADA": [["Groceries   ", 0.38, 1.15, 1.13, 0.66, 0.44, 1.05, 1.3, 1.71, 1.25, 2.26, 3.3, 4.52, 3.91, 3.11, 2.48, 1.58, 1.24, 3.29, 1.31, 3.93, 4.14, 3.13, 2.85, 4.12, 2.77, 1.31, 1.45, 1.6, 0.99, 2.39, 0.64, 0.52], ["Health Care   ", 0.77, 1.15, 0.85, 0.66, 0.79, 1.32, 0.7, 2.61, 2.4, 3.01, 5.49, 3.62, 4.19, 4.67, 2.29, 2.11, 2.48, 1.45, 6.42, 14.85, 11.71, 7.76, 7.0, 8.73, 7.3, 5.4, 6.9, 4.05, 6.78, 17.04, 18.03, 7.81], ["Mortgaes   ", 19.23, 19.23, 27.04, 21.71, 18.11, 22.81, 17.77, 12.38, 17.81, 12.5, 10.53, 26.92, 19.91, 20.67, 26.99, 16.76, 18.6, 24.93, 21.34, 28.4, 9.39, 7.39, 7.38, 16.33, 16.14, 18.33, 12.65, 14.01, 9.76, 12.68, 11.84, 9.45, 18.7], ["Property   ", 3.46, 3.46, 6.48, 5.26, 7.09, 7.02, 5.57, 9.12, 9.93, 6.25, 3.76, 6.04, 5.88, 5.03, 11.94, 12.0, 9.3, 10.88, 10.28, 8.81, 14.34, 13.96, 18.9, 21.68, 20.85, 28.86, 32.38, 28.62, 38.24, 29.65, 23.19, 28.53, 27.69], ["Retirement   ", 4.23, 3.08, 1.69, 5.92, 3.54, 3.07, 3.48, 3.91, 3.77, 8.75, 4.51, 4.95, 5.43, 13.97, 8.3, 4.95, 3.86, 4.96, 5.4, 7.29, 17.26, 16.04, 33.9, 12.05, 9.52, 7.1, 13.34, 8.48, 5.76, 7.88, 6.99, 3.73, 2.23], ["Scams   ", 2.31, 0.77, 1.97, 1.64, 1.97, 2.19, 2.79, 1.95, 3.42, 5.0, 3.01, 4.4, 5.88, 3.63, 4.33, 3.43, 3.33, 2.62, 2.9, 3.81, 2.16, 1.71, 1.3, 2.07, 1.65, 1.65, 1.89, 4.05, 3.03, 2.77, 2.87, 6.59, 5.38], ["Social security   ", 3.85, 1.54, 3.1, 3.29, 3.54, 2.63, 3.14, 1.95, 4.79, 1.25, 2.26, 3.3, 4.07, 2.79, 3.63, 2.86, 2.46, 3.17, 1.58, 3.16, 8.38, 9.37, 10.9, 9.56, 8.76, 3.68, 6.53, 5.83, 7.59, 3.71, 5.14, 3.44, 4.4], ["Tax   ", 65.77, 68.46, 57.18, 59.21, 62.6, 57.46, 62.02, 64.17, 53.42, 62.5, 69.17, 41.21, 45.7, 41.9, 34.43, 53.71, 54.91, 47.11, 51.65, 37.21, 25.25, 28.02, 13.69, 24.53, 27.14, 24.86, 20.99, 19.68, 18.32, 20.88, 20.92, 21.88, 23.43], ["Student loans   ", 1.15, 0.56, 1.64, 2.36, 3.07, 3.48, 2.61, 2.74, 2.5, 1.5, 4.4, 4.98, 3.91, 2.6, 1.52, 3.86, 2.62, 2.11, 3.59, 4.44, 7.66, 3.04, 3.92, 3.1, 5.45, 5.51, 10.99, 11.64, 14.67, 9.62, 7.7, 9.84]], "AUSTRALIA": [["Health Care", 50.0, 26.67, 47.83, 64.0, 43.75, 19.57, 23.6, 16.48, 15.98, 7.17, 7.14, 8.03, 3.27, 1.92, 1.82, 2.35, 2.07, 1.53, 2.36, 11.56, 14.47, 24.33, 18.31, 8.96, 6.76, 7.08, 5.35, 5.19, 5.28, 5.2, 4.99, 7.09, 4.42], ["Mortgaes", 30.0, 26.67, 4.35, 6.25, 15.22, 8.99, 11.36, 11.86, 30.77, 26.01, 15.18, 18.34, 27.17, 26.23, 23.77, 26.11, 28.21, 34.85, 27.58, 19.05, 13.89, 10.63, 11.65, 11.01, 14.29, 11.98, 14.97, 14.86, 18.01, 10.97, 11.76, 19.77], ["Retirement", 20.0, 20.0, 30.43, 32.0, 37.5, 8.7, 23.6, 8.52, 7.73, 7.43, 12.82, 18.02, 32.08, 27.36, 35.73, 37.82, 29.81, 31.32, 24.12, 23.64, 20.75, 16.48, 19.26, 25.47, 38.38, 36.81, 28.35, 26.47, 21.23, 22.35, 41.34, 30.69, 34.2], ["Property", 6.67, 4.35, 12.5, 10.87, 7.87, 14.77, 27.84, 22.29, 17.4, 16.92, 16.23, 16.24, 11.52, 10.24, 11.78, 13.19, 13.46, 12.3, 14.4, 15.71, 29.64, 35.71, 24.96, 20.27, 30.14, 28.92, 34.2, 32.1, 20.49, 21.77, 22.0], ["Student loans", 6.67, 8.7, 2.25, 1.55, 1.69, 1.83, 3.86, 0.78, 1.24, 0.76, 0.71, 1.3, 1.47, 0.93, 1.7, 2.89, 1.82, 1.7, 0.85, 2.46, 3.6, 7.99, 6.92, 6.67, 8.99, 9.13, 12.96, 5.43], ["Tax", 13.33, 4.35, 26.09, 20.22, 27.84, 22.16, 14.99, 22.34, 17.78, 18.95, 19.03, 17.07, 19.46, 21.52, 16.91, 16.99, 14.14, 16.51, 16.57, 11.33, 8.45, 7.81, 9.79, 8.29, 8.84, 7.96, 5.85, 5.23, 6.53, 7.37], ["Social security", 4.0, 6.52, 5.62, 3.98, 1.03, 3.0, 2.75, 6.14, 3.27, 1.83, 2.93, 2.24, 1.67, 1.5, 2.26, 1.77, 2.33, 1.63, 2.2, 2.73, 2.41, 1.88, 1.89, 1.98, 2.3, 1.75, 2.27, 2.43, 2.39], ["Groceries", 8.7, 4.49, 2.84, 4.12, 6.13, 5.13, 7.63, 2.33, 1.42, 0.65, 1.02, 1.93, 2.25, 2.02, 3.47, 2.75, 4.41, 3.09, 3.24, 2.83, 2.54, 2.02, 2.27, 3.92, 3.14, 2.9, 4.63, 3.08], ["Scams", 4.35, 3.37, 14.2, 7.73, 6.52, 4.58, 6.45, 4.76, 3.8, 3.31, 2.39, 3.81, 3.64, 3.01, 3.83, 6.85, 5.17, 3.84, 2.94, 3.36, 3.73, 3.99, 4.44, 3.58, 2.62, 2.69, 2.13, 1.34]], "IND": [["Health Care    ", 33.33, 9.09, 5.17, 5.19, 4.42, 48.41, 70.12, 50.88, 23.72, 41.52, 42.75, 30.08, 18.1, 14.17, 16.04, 14.84, 14.82, 8.86, 13.1], ["Scams    ", 66.67, 5.19, 8.85, 0.68, 0.61, 2.37, 1.97, 2.35, 3.12, 2.86, 6.25, 2.24, 4.3, 8.89, 6.33, 6.44], ["Mortgaes    ", 60.61, 36.21, 32.59, 22.12, 7.95, 0.61, 3.95, 3.95, 6.39, 5.88, 5.47, 7.62, 8.33, 14.18, 14.06, 16.98, 20.25, 15.17], ["Property    ", 6.06, 1.72, 11.85, 13.72, 1.36, 2.19, 10.28, 11.79, 9.8, 10.94, 15.71, 12.08, 12.31, 11.33, 11.86, 12.66, 9.66], ["Social security    ", 9.09, 3.45, 4.44, 4.87, 11.82, 15.85, 10.96, 18.58, 14.0, 12.55, 17.19, 18.1, 7.5, 13.81, 13.67, 11.05, 9.49, 8.74], ["Student loans    ", 15.15, 17.24, 18.52, 21.68, 22.5, 6.71, 27.63, 28.85, 9.09, 6.27, 9.38, 11.43, 14.17, 13.06, 12.89, 12.67, 13.29, 18.16], ["Groceries    ", 3.45, 0.74, 0.88, 1.36, 0.44, 0.79, 0.98, 0.78, 0.48, 2.5, 0.37, 1.56, 0.81, 1.58, 0.69], ["Retirement    ", 10.34, 2.96, 0.44, 0.23, 1.22, 7.11, 10.32, 11.76, 18.36, 23.81, 29.17, 21.64, 23.05, 19.95, 22.78, 22.76], ["Tax    ", 22.41, 18.52, 23.01, 5.68, 4.88, 3.95, 4.35, 3.93, 8.63, 4.69, 1.9, 5.83, 6.34, 4.3, 2.96, 4.75, 5.29]] };



            var startYear = 1990;
            var endYear = 2022;
            var currentYear = 2022;
            var colorSet = new am4core.ColorSet();

            var chart = am4core.create("chartdiv", am4charts.RadarChart);
            chart.numberFormatter.numberFormat = "#.## '%'";
            chart.hiddenState.properties.opacity = 0;
            // set license logo to false
            chart.logo.disabled = true;
            chart.startAngle = 270 - 180;
            chart.endAngle = 270 + 180;
            // chart.startAngle = 180 - 90;
            // chart.endAngle = 180 + 90;

            chart.padding(5, 15, 5, 10)
            chart.radius = am4core.percent(65);
            chart.innerRadius = am4core.percent(40);

            // year label goes in the middle
            var yearLabel = chart.radarContainer.createChild(am4core.Label);
            yearLabel.horizontalCenter = "middle";
            yearLabel.verticalCenter = "middle";
            yearLabel.fill = am4core.color("#673AB7");
            yearLabel.fontSize = 30;
            yearLabel.text = String(currentYear);

            // zoomout button
            var zoomOutButton = chart.zoomOutButton;
            zoomOutButton.dx = 0;
            zoomOutButton.dy = 0;
            zoomOutButton.marginBottom = 15;
            zoomOutButton.parent = chart.rightAxesContainer;

            // scrollbar
            chart.scrollbarX = new am4core.Scrollbar();
            chart.scrollbarX.parent = chart.rightAxesContainer;
            chart.scrollbarX.orientation = "vertical";
            chart.scrollbarX.align = "center";
            chart.scrollbarX.exportable = false;

            // vertical orientation for zoom out button and scrollbar to be positioned properly
            chart.rightAxesContainer.layout = "vertical";
            chart.rightAxesContainer.padding(120, 20, 120, 20);

            // category axis
            var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
            categoryAxis.renderer.grid.template.location = 0;
            categoryAxis.dataFields.category = "country";

            var categoryAxisRenderer = categoryAxis.renderer;
            var categoryAxisLabel = categoryAxisRenderer.labels.template;
            categoryAxisLabel.location = 0.5;
            categoryAxisLabel.radius = 28;
            categoryAxisLabel.relativeRotation = 90;

            categoryAxisRenderer.fontSize = 11;
            categoryAxisRenderer.minGridDistance = 10;
            categoryAxisRenderer.grid.template.radius = -25;
            categoryAxisRenderer.grid.template.strokeOpacity = 0.05;
            categoryAxisRenderer.grid.template.interactionsEnabled = false;

            categoryAxisRenderer.ticks.template.disabled = true;
            categoryAxisRenderer.axisFills.template.disabled = true;
            categoryAxisRenderer.line.disabled = true;

            categoryAxisRenderer.tooltipLocation = 0.5;
            categoryAxis.tooltip.defaultState.properties.opacity = 0;

            // value axis
            var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
            valueAxis.min = 0;
            valueAxis.max = 100;
            valueAxis.strictMinMax = true;
            valueAxis.tooltip.defaultState.properties.opacity = 0;
            valueAxis.tooltip.animationDuration = 0;
            valueAxis.cursorTooltipEnabled = true;
            valueAxis.zIndex = 10;

            var valueAxisRenderer = valueAxis.renderer;
            valueAxisRenderer.axisFills.template.disabled = true;
            valueAxisRenderer.ticks.template.disabled = true;
            valueAxisRenderer.minGridDistance = 20;
            valueAxisRenderer.grid.template.strokeOpacity = 0.05;


            // series
            var series = chart.series.push(new am4charts.RadarColumnSeries());
            console.log(series)
            series.columns.template.width = am4core.percent(90);
            series.columns.template.strokeOpacity = 0;
            series.dataFields.valueY = "value" + currentYear;
            series.dataFields.categoryX = "country";
            series.tooltipText = "{categoryX}:{valueY.value}";

            // this makes columns to be of a different color, depending on value
            series.heatRules.push({ target: series.columns.template, property: "fill", minValue: 0, maxValue: 100, min: am4core.color("#673AB7"), max: am4core.color("#F44336"), dataField: "valueY" });

            // cursor
            var cursor = new am4charts.RadarCursor();
            chart.cursor = cursor;
            cursor.behavior = "zoomX";

            cursor.xAxis = categoryAxis;
            cursor.innerRadius = am4core.percent(40);
            cursor.lineY.disabled = true;

            cursor.lineX.fillOpacity = 0.2;
            cursor.lineX.fill = am4core.color("#000000");
            cursor.lineX.strokeOpacity = 0;
            cursor.fullWidthLineX = true;

            // year slider
            var yearSliderContainer = chart.createChild(am4core.Container);
            yearSliderContainer.layout = "vertical";
            yearSliderContainer.padding(0, 38, 0, 38);
            yearSliderContainer.width = am4core.percent(100);

            var yearSlider = yearSliderContainer.createChild(am4core.Slider);
            yearSlider.events.on("rangechanged", function () {
                updateRadarData(startYear + Math.round(yearSlider.start * (endYear - startYear)));
            })
            yearSlider.orientation = "horizontal";
            yearSlider.start = 0.5;
            yearSlider.exportable = false;

            chart.data = generateRadarData();

            function generateRadarData() {
                var data = [];
                var i = 0;
                for (var continent in temperatures) {
                    var continentData = temperatures[continent];

                    continentData.forEach(function (country) {

                        var rawDataItem = { "country": country[0] }

                        for (var y = 2; y < country.length; y++) {
                            rawDataItem["value" + (startYear + y - 2)] = country[y];
                        }

                        data.push(rawDataItem);
                    });

                    createRange(continent, continentData, i);

                    i++;


                }
                return data;
            }


            function updateRadarData(year) {
                if (currentYear != year) {
                    currentYear = year;
                    yearLabel.text = String(currentYear);
                    series.dataFields.valueY = "value" + currentYear;
                    chart.invalidateRawData();
                }
            }

            function createRange(name, continentData, index) {

                var axisRange = categoryAxis.axisRanges.create();
                axisRange.axisFill.interactionsEnabled = true;
                axisRange.text = name;
                // first country
                axisRange.category = continentData[0][0];

                // last country
                axisRange.endCategory = continentData[continentData.length - 1][0];

                // every 3rd color for a bigger contrast
                axisRange.axisFill.fill = colorSet.getIndex(index * 3);
                axisRange.grid.disabled = true;
                axisRange.label.interactionsEnabled = false;
                axisRange.label.bent = true;

                var axisFill = axisRange.axisFill;
                axisFill.innerRadius = -0.001; // almost the same as 100%, we set it in pixels as later we animate this property to some pixel value
                axisFill.radius = -20; // negative radius means it is calculated from max radius
                axisFill.disabled = false; // as regular fills are disabled, we need to enable this one
                axisFill.fillOpacity = 1;
                axisFill.togglable = true;

                axisFill.showSystemTooltip = true;
                axisFill.readerTitle = "click to zoom";
                axisFill.cursorOverStyle = am4core.MouseCursorStyle.pointer;

                axisFill.events.on("hit", function (event) {
                    var dataItem = event.target.dataItem;
                    if (!event.target.isActive) {
                        categoryAxis.zoom({ start: 0, end: 1 });
                    }
                    else {
                        categoryAxis.zoomToCategories(dataItem.category, dataItem.endCategory);
                    }
                })

                // hover state
                var hoverState = axisFill.states.create("hover");
                hoverState.properties.innerRadius = -10;
                hoverState.properties.radius = -25;

                var axisLabel = axisRange.label;
                axisLabel.location = 0.5;
                axisLabel.fill = am4core.color("#ffffff");
                axisLabel.radius = 3;
                axisLabel.relativeRotation = 0;
            }

            var slider = yearSliderContainer.createChild(am4core.Slider);
            slider.start = 1;
            slider.exportable = false;
            slider.events.on("rangechanged", function () {
                var start = slider.start;

                chart.startAngle = 270 - start * 179 - 1;
                chart.endAngle = 270 + start * 179 + 1;

                valueAxis.renderer.axisAngle = chart.startAngle;
            })

        }); // end am4core.ready()
    </script>
    
    <!-- HTML -->
    <div id="chartdiv"></div>
    <div class="link-container">
        <a class="link" href="index.html">
            <img class="home" src="asset/next-icon.png" alt="File 1 Thumbnail">
            <h3>Go back to home</h3>
        </a>
    </div>

</body>

</html>